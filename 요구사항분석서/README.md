# 요구사항 명세서

---

## **1. 유저 관리 (User Service)**

### **1.1 회원가입**
- **기능 설명**: 사용자가 `아이디`와 `비밀번호`를 입력하여 회원가입하거나, `solved.ac API`를 통해 회원가입을 진행.
- **요구사항**:
  1. **아이디와 비밀번호 회원가입**:
     - 입력받은 `아이디`가 중복되지 않아야 함.
     - 비밀번호는 해시화된 상태로 저장.
  2. **solved.ac API 회원가입**:
     - solved.ac 인증 정보를 통해 회원가입 처리.
     - solved.ac 닉네임 및 레이팅 정보를 데이터베이스에 저장.

---

### **1.2 로그인**
- **기능 설명**: 사용자 아이디/비밀번호 또는 solved.ac 로그인을 통해 인증.
- **요구사항**:
  1. **사이트 아이디/비밀번호 로그인**:
     - 입력 정보와 데이터베이스 비교 후 인증 처리.
  2. **solved.ac 로그인**:
     - OAuth API를 활용하여 solved.ac 계정 인증.
     - 인증 성공 시 solved.ac 정보 갱신 또는 신규 사용자 등록.
- **추가 요구사항**:
  - 로그인 성공 시 JWT Access Token 및 Refresh Token 발급.
  - 비밀번호는 입력 시 해시화된 값과 비교하여 검증.

---

## **2. 통계 관리 (Statistics Service)**

### **2.1 문제 풀이 히스토리 저장**
- **기능 설명**: 사용자 풀이 데이터를 저장하여 통계 생성에 활용.
- **요구사항**:
  - 저장 데이터:
    - `백준 핸들`, `문제 번호`, `풀이 상태 (성공/실패)`, `시작 날짜`, `제한 시간`, `소요 시간`, `풀이 언어`.
  - TimeLimit Service로부터 풀이 로그 데이터를 수신하여 저장.

---

### **2.2 사용자 통계**
- **기능 설명**: 사용자 풀이 히스토리를 기반으로 다양한 통계 제공.
- **요구사항**:
  - 사용자가 이 사이트에서 푼 문제 수 계산 및 표시.
  - 시간 제한 내 풀이 성공률 계산:
    - 성공률 = `(성공한 문제 개수 / 전체 시도 수)`.
  - **solved.ac API 연동**:
    - 태그별, 난이도별 문제 풀이 통계 제공.
  - **취약 태그 분석**:
    - 풀이 빈도가 낮은 상위 5개 태그 제공.
    - 태그별 성공률 데이터 포함.

---

### **2.3 문제별 사용자 랭킹**
- **기능 설명**: 문제 풀이 시간을 기준으로 사용자 랭킹 제공.
- **요구사항**:
  - 풀이 시간이 빠른 순서로 상위 100명 사용자 표시.
  - 문제 제출 시 성공 여부에 따라 실시간으로 랭킹 갱신.

---

### **2.4 전체 사용자 랭킹**
- **기능 설명**: 점수를 기반으로 전체 사용자 랭킹 제공.
- **요구사항**:
  - 하루 1회 갱신.
  - 점수 계산 방식:
    - 문제 1개 성공 = 1점.
    - 100위 내 사용자에 점수 차등 부여 (1위 = 100점, 100위 = 1점).
  - 랭킹 데이터:
    - `백준 핸들`, `점수`.

---

## **3. 문제 뽑기 (Problem Service)**

### **3.1 랜덤 문제 제공**
- **기능 설명**: 사용자가 풀지 않은 문제를 추천.
- **요구사항**:
  - 사용자 조건에 맞는 문제 필터링:
    - `난이도`, `태그`, `푼 사람 수` 조건 적용.
    - `포함 태그 (IN)` 및 `제외 태그 (NOT IN)` 조건 동시 만족.
  - 조건이 없을 경우 랜덤 문제 추천.

---

### **3.2 취약 태그 기반 문제 제공**
- **기능 설명**: 사용자의 취약 태그를 기반으로 문제 추천.
- **요구사항**:
  - Statistics Service로부터 사용자의 취약 태그 리스트 수신.
  - 취약 태그 중 하나 이상 포함된 문제를 필터링.
  - solved.ac 티어를 고려하여 적절한 난이도의 문제 제공.

---

### **3.3 지정 문제 제공**
- **기능 설명**: 관리자가 지정한 문제를 제공.
- **요구사항**:
  - 문제 번호, 제목, 난이도 정보와 함께 문제 제공.

---

## **4. 시간 제한 문제 풀이 (Time Service)**

### **4.1 문제 풀이 성공 여부 확인**
- **기능 설명**: 제한 시간 내 문제 풀이 성공 여부를 확인.
- **요구사항**:
  - 문제 풀이 성공 시 풀이 로그 저장 및 히스토리 전달.
  - 풀이 로그 데이터를 Statistics Service에 전달하여 사용자 히스토리 갱신.
  - 성공 및 실패 로그를 구분하여 저장.
